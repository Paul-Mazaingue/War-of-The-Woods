<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css"/>
    <script src="./js/particles.js"></script>
    <script src="./js/helicoptere2.js"></script>
    <script src="./js/camera2.js"></script>
    
</head>
<body>
    <div id="game-container">
        <img id="map" style="width:6000px;height:3357px;" src="img/map.jpeg">
        <div id="helico-container">
            <img id="helico" style="width:100px;height:100px;" src="img/helico.gif"></img>
        </div>
        <div id="red-square">
            <div class="animated-border"></div>
            <div id="zone-0" style="left:150px;top: -50px;display:none; position:absolute; width:200px; height:200px; background-color:white; padding:10px; border:1px solid black;">
                <img src="img/preview.png" style="width:50%;height:50%;float:right;;"/>
                <h2>Lorem Ipsum</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque consequat libero et nisl fringilla, nec volutpat tortor fermentum.</p>
            </div>            
        </div>
    </div>
    <script>

        if(typeof(helicoptere) == "undefined") {
            helicoptere = new Helicoptere();
        }

        // Récupération des élément html
        const gameContainer = document.getElementById('game-container');
        const helicoContainer = document.getElementById('helico-container');
        const helico = document.getElementById('helico');
        const redSquare = document.getElementById('red-square');
        const zone0 = document.getElementById('zone-0');

        // Taille de la map
        const mapWidth = 6000;
        const mapHeight = 3357;


        
        redSquare.style.left = helicoptere.zonex + 'px';
        redSquare.style.top = helicoptere.zoney + 'px';
        
        // Paramètre des particules 
        const wind_widht = "2px";
        const wind_height = "5px";


        // affiche le texte de la zone 0
        function showZone() {
            visible = helicoptere.x+(helicoptere.zoneWidth/2) >= helicoptere.zonex && 
            helicoptere.x+(helicoptere.zoneWidth/2) <= helicoptere.zonex+helicoptere.zoneWidth &&
            helicoptere.y+(helicoptere.zoneHeight/2) >= helicoptere.zoney &&
            helicoptere.y+(helicoptere.zoneHeight/2)<= helicoptere.zoney+helicoptere.zoneHeight;
            zone0.style.display = visible ? 'block' : 'none';
        }


        // On regarde si une touche est enfoncée
        document.addEventListener('keydown', event => {
            helicoptere.keyState[event.key] = true;
        });
        document.addEventListener('keyup', event => {
            helicoptere.keyState[event.key] = false;
        });

        // Gestions de l'atterissage et du décollage
        document.addEventListener('keydown', async event => {
            if (event.key === ' ' && !helicoptere.isLanded && !helicoptere.isAnimating) {
                helicoptere.isLanded = true;
                helicoptere.canControl = false;
                helicoptere.isAnimating = true;
                // Faire atterrir l'hélico
                await helicoptere.landHelico();
                helico.src = "img/helico-static.png";
                helicoptere.canControl = true;
                helicoptere.isAnimating = false;
            } else if (event.key === ' ' && helicoptere.isLanded && helicoptere.canControl && !helicoptere.isAnimating) {
                helicoptere.isLanded = false;
                // Faire décoller l'hélico
                helicoptere.canControl = false;
                helicoptere.isAnimating = true;
                helico.src = "img/helico.gif";
                await helicoptere.takeOffHelico();
                helicoptere.canControl = true;
                helicoptere.isAnimating = false;
                helicoptere.moveHelico();
            }
        });

        

        // Gestion des déplacements
        helicoptere.moveHelico();
</script>
</body>
</html> 